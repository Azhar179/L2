pipeline {
    agent any
    stages {
        stage('Install Liquibase') {
            steps {
                bat 'docker pull liquibase/liquibase:4.28.0'
            }
        }
        stage('Apply Database Changes') {
            steps {
                bat 'docker run --rm --name liquibase -v C:/Users/azbag/Downloads/liquibase15.8/demo/src/main/resources/db/changelog:/liquibase/changelog \
    liquibase/liquibase:4.28.0 \
    --changeLogFile=/liquibase/changelog/changelog-master.xml update'
            }
        }
    }
    post {
        always {
            bat 'docker container prune -f'
        }
    }
}
